<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">

    <title>points et rectangles</title>
    <meta name="description" content="dessiner précisément sur le canvas">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

</head>

<body>

    <!--ajout d'un import contenant les essentiels-->
    <script src="code/base.js"></script>

    <script>

        //une classe point qui stocke 2 coorodnnées X et Y
        var Point = function (x, y) {
            this.x = x || 0;
            this.y = y || 0;
        };


        //une méthode de dessin pour dessiner en boucle
        function draw() {
            //requestAnimationFrame 
            //rappelle la fonction draw() aussi souvent que possible

            requestAnimationFrame(draw);

            //on efface tout
            ctx.clearRect(0, 0, w, h);

            //on crée un Point à :
            // 100 px en X
            // 150 px en Y
            var p = new Point(100, 150);

            //taille du rectangle
            var size = 25;

            //on dessine un rectangle de taille SIZE à la position P
            ctx.fillRect(p.x, p.y, size, size);

            return

            //dessine un carré centré:

            //on change la position de P
            p = new Point( w/2, h/2 );

            //on redessine à la nouvelle position, à la même taille
            ctx.fillRect( p.x, p.y, size,size );

            return

            //dessine un carré en bas à droite

            p.x = w - 100 - size;
            p.y = h - 100 - size;
            ctx.fillRect( p.x, p.y, size,size );
            
            return

            //dessine 100 carrés un peu partout

            //si le tableau de point n'existe pas
            if( points === undefined ){
                //on le crée
                points = [];

                //et on le remplit
                for( var i = 0; i < 100; i++ ){

                    //de points placés aléatoirement sur la surface de l'écran
                    var p = new Point(  Math.random() * w,
                                        Math.random() * h );
                    points.push( p );

                }
            }

            points.forEach( function( p,i ){

                ctx.fillRect( p.x, p.y, size, size );

                //au lieu d'utiliser la taille size
                //on peut utiliser une autre variable
                // l'index du point dans le tableau par exemple
            
                return 
            
                ctx.fillRect( p.x, p.y, i/16, i*8 );

                //vous pouvez jouer avec les valeurs 16 et 8 pour voir ce qui se passe

            });

        }
        var points;
        draw();

    </script>
</body>

</html>